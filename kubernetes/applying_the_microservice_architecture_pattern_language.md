Applying the microservice architecture pattern language
===

https://microservices.io/articles/applying.html の英弱なりの訳

英語難しい


-----

マイクロサービスアーキテクチャパターン・ランゲージは多数のパターンのグループからなります。パターン・ランゲージの価値はパターンの合計を超えます。
それは、パターン間での関係性を定義しているからです:

- Predecessor(先行要素?): "先行要素パターン"はこのパターンの必要性を動機づけるパターンです。 例えば、マイクロサービスアーキテクチャパターンは、モノリシックアーキテクチャパターンを除く残りのパターン・ランゲージの先行要素です。
- Successor(後継): "後継パターン" はもたらされた問題を解決するパターンです。例えば、マイクロサービスアーキテクチャパターンを適用した時に、サービスディスカバリパターンやサーキットブレイカーパターンなどの多数の後続パターンを適用する必要があります。
- Alternative(代替): "代替パターン"は代替案を提供します。例えば、モノリシックアーキテクチャパターンとマイクロサービスアーキテクチャパターンはアプリケーションアーキテクチャパターンの代替案です。2つの要素があるとき、一方を選択しなければなりません。これらの関係は、パターン言語を利用する時に貴重な方向性を提供します。あるパターンを適用すると、後継パターンを適用しなければならない問題が発生します。後継のパターンが存在しなくなるまで再帰的にパターンが選択されます。２つ以上のパターンがある場合は、１つを選択して適用しなければならなりませｎ。これは、多くの点でグラフ探索に似ています。

それでは、あなたのアプリケーションにどのようにしてマイクロサービスアーキテクチャを適用するかを見てみましょう。この記事では、あなたがしなければならない3つの決定を見ていきます。今後の記事では、他の重要なものも見ますが、非常に重要というわけではありません。

## Decision #1: モノリシックアーキテクチャかマイクロサービスアーキテクチャか
1つ目の決定はモノリシックアーキテクチャパターンかマイクロサービスアーキテクチャパターンかを決める必要があります。マイクロサービスアーキテクチャパターンを選択した場合、他の多数のパターンも決定する必要があります。

![img](https://microservices.io/i/PatternsRelatedToMicroservices.jpg)

ご覧のように、数多くのパターンを適用しなければなりません。いくつかの選択肢を見てみましょう。

## Decision #2: どのようにしてアプリケーションをサービスに分割するか

あなたはマイクロサービスアーキテクチャを使うと決めた時、サービスを定義する必要があります。それには２つのオプションがあります。


- ビジネス機能による分割 - ビジネスの機能に対応するサービスを定義する
- サブドメインによる分割 - DDD におけるサブドメインでサービスを分割する

このパターンは技術的な概念ではなく、ビジネスの概念に基づいた一連のサービスと同様の結果をもたらします。

## Decision #3 どのようにしてデータの一貫性の維持ととクエリの実行するか

マイクロサービスの主な機能は、サービスごとのデータベースパターンです。別の方法として、データベース共有パターンがありますが、基本的ににはアンチパターンであり、避けることをおすすめします。
サービスごとのデータベースパターンは、データの一貫性の維持とクエリの実行が動的に変わります。将来的には Saga パターンを使う必要があるでしょう。多くの場合コマンドクエリ責任分離パターン(CQRS パターン)を使用してクエリを実装する必要があります。
