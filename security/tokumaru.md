体系的に学ぶ安全な Web アプリケーションの作り方
=====

# 3.1
## GET POST の使い分け

以下に当てはまる場合は `POST`, 当てはまらない場合は `GET` を使う
- 副作用があるリクエスト
- 機密データ
- 総量が多い場合

## セッションID
### 要件
セッションID を第三者
1. が推測できないこと
2. から強制されないこと
3. に漏洩しないこと

### セッションID は自作しない

ツールのセッションID 管理機能を使う

### セッションID は認証した後に変更する

1. 攻撃者認証前にセッションID もらう
2. そのセッションID を正規利用者が認証
3. 攻撃者がセッションID つきでアクセス

###　クッキーの `Domain` 属性は指定しない

サブドメインでも使えちゃう

### クッキーの HttpOnly はつけてもいいかも

JavaScript から取れなくなる

# 3.2
## 同一生成元ポリシー
JavaScript のポリシー
- 同一FQDNである
- 同一プロトコルである
- 同一ポートである

一方でクッキーはプロトコルとポートは見ない。JavaScript は path がない

同一性制限ポリシーを回避する代表的なのが XSS

# 4.2
## 入力処理とセキュリティ

入力処理は
- エンコーディング検証
- エンコーディング変換
- パラメータ文字列の検証


入力処理の最低基準
- 入力値検証はアプリケーション要件が基準で行う
- 文字エンコーディングの検証
- 制御文字を含む文字種の検証
- 文字列長の検証
- 全てのパラメータで検証する
  - hidden とか referer とか http header とか　
- 全てのパラメータで文字種と最大文字列を設定する


入力値エスケープ
- `><%"''"` は文字実態参照に変換する

レスポンスは `Content-Type, charest` を明示
